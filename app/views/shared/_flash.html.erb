<% if flash.any? %>
  <div id="flash-container" class="fixed top-4 right-4 z-50 space-y-3 max-w-md">
    <% flash.each do |type, message| %>
      <% 
        case type.to_sym
        when :notice, :success
          bg_color = "bg-green-50"
          border_color = "border-green-200"
          text_color = "text-green-800"
          icon_color = "text-green-600"
          icon_path = "M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
        when :alert, :error
          bg_color = "bg-red-50"
          border_color = "border-red-200"
          text_color = "text-red-800"
          icon_color = "text-red-600"
          icon_path = "M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"
        when :warning
          bg_color = "bg-amber-50"
          border_color = "border-amber-200"
          text_color = "text-amber-800"
          icon_color = "text-amber-600"
          icon_path = "M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
        else
          bg_color = "bg-blue-50"
          border_color = "border-blue-200"
          text_color = "text-blue-800"
          icon_color = "text-blue-600"
          icon_path = "M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
        end
      %>
      <div class="flash-message <%= bg_color %> <%= border_color %> border rounded-lg shadow-lg p-4 flex items-start gap-3 animate-slide-in">
        <div class="flex-shrink-0">
          <svg class="w-5 h-5 <%= icon_color %>" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="<%= icon_path %>"/>
          </svg>
        </div>
        <div class="flex-1 <%= text_color %> text-sm font-medium">
          <%= message %>
        </div>
        <button type="button" class="flex-shrink-0 <%= text_color %> hover:opacity-70 transition-opacity" onclick="this.closest('.flash-message').remove()">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
    <% end %>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const flashMessages = document.querySelectorAll('.flash-message');
      flashMessages.forEach((message) => {
        setTimeout(() => {
          message.style.opacity = '0';
          message.style.transform = 'translateX(100%)';
          setTimeout(() => message.remove(), 300);
        }, 5000);
      });
    });
  </script>
  <style>
    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    .animate-slide-in {
      animation: slideIn 0.3s ease-out;
    }
    .flash-message {
      transition: opacity 0.3s ease-out, transform 0.3s ease-out;
    }
  </style>
<% end %>